sonobuoy-config:
  description: Running E2E tests for AI Conformance via Sonobuoy to answer the self-certification
    questionnaire template in https://github.com/cncf/ai-conformance.
  driver: Job
  plugin-name: ai-conformance
  result-format: junit
  source-url: https://raw.githubusercontent.com/carlory/sonobuoy-plugins/master/ai-conformance/plugin.yaml
spec:
  args:
  - -c
  - sleep 5; ginkgo -v run /usr/local/bin/e2e.test -- --progress-report-url=http://localhost:8099/progress
    | tee $RESULTS_DIR/e2e.log ; tar -czf $RESULTS_DIR/e2e.tar.gz -C $RESULTS_DIR
    e2e.log -C $ARTIFACTS junit_01.xml; echo $RESULTS_DIR/e2e.tar.gz > $RESULTS_DIR/done;
    sleep 5
  command:
  - bash
  env:
  - name: RESULTS_DIR
    value: /tmp/sonobuoy/results
  - name: ARTIFACTS
    value: /tmp/sonobuoy/results
  image: ghcr.io/carlory/ai-conformance:latest
  name: plugin

